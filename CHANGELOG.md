# 变更日志

## [1.0.2] - 2025-12-08

### 新增 (Added)
- **国旗涂鸦功能**：新增第三个Tab"涂鸦"，从 Flutter 项目移植国旗涂鸦游戏
  - `PaintGameData.ets` - 涂鸦游戏数据配置，包含国旗颜色信息和关卡配置
  - `PaintHomePage.ets` - 涂鸦首页，展示世界和各国州旗分类
  - `PaintPlayPage.ets` - 涂鸦游戏页面，使用 Web 组件加载 HTML 游戏
  - `paint_game.html` - HTML5 涂鸦游戏，支持颜色选择和区域填充
  - 支持分类：世界（20关）、美国、德国、意大利、巴西
  - 直接进入最新关卡，无需关卡选择页面
  - 每关包含3个国旗涂鸦任务
  - 支持提示功能（显示正确国旗参考）
  - 关卡进度自动保存

### 变更 (Changed)
- 更新 `Index.ets`：底部导航栏从4个Tab增加到5个Tab（首页、画廊、涂鸦、探索、我的）
- 更新 `GameProgressManager.ets`：新增涂鸦游戏类型枚举（PAINT_WORLD、PAINT_US等）
- 新增图标资源：`icon_tab_paint.svg`、`icon_tab_paint_selected.svg`、`icon_back.svg`、`icon_hint.svg`

## [1.0.1] - 2025-12-08

### 新增 (Added)
- **本周国旗功能**：首页新增"本周国旗"模块
  - `WeeklyFlagData.ets` - 每周国旗数据配置，包含最近10周的国庆日国旗
  - 根据当前周数自动展示对应国庆日的国家国旗
  - 展示国家名称、国庆日日期和描述
  - 点击可跳转至国旗详情页

## [1.0.0] - 2024-12-08

### 新增 (Added)
- **知识问答功能**：从 Flutter 项目移植知识问答游戏
  - `TriviaLevels.ets` - 关卡配置和问题数据（10关，每关10题）
  - `TriviaLevelsPage.ets` - 关卡选择页面
  - `TriviaPlayPage.ets` - 答题游戏页面
  - 问题类型涵盖国旗形状、颜色、图案、历史等趣味知识
  - 支持生命值系统、进度追踪、结果展示

- **专题功能**：新增国旗专题分类浏览
  - `TopicData.ets` - 专题数据配置
  - `TopicListPage.ets` - 专题列表页面
  - `TopicDetailPage.ets` - 专题详情页面（展示该专题下的所有国旗）
  - 内置专题：北欧旗帜、三色旗、泛阿拉伯旗帜、泛非洲旗帜、国旗上的动物
  - 首页添加专题推荐区域（横向滚动卡片）

### 重大变更 (Breaking Changes)
- **应用转型为国旗小百科**：将财会工具箱应用完全改造为国旗小百科应用
  - 更新应用名称为"国旗小百科"
  - 更新应用描述为"探索世界各国国旗的奥秘"
  - 更新底部导航栏：首页、画廊、探索、我的
  - 创建新的 GalleryPage（画廊页面）和 ExplorePage（探索页面）
  - 重写 HomePage 为国旗主题内容，包含：
    - 欢迎卡片（国旗小百科主题）
    - 快捷入口（全部国旗、按洲分类、国旗猜猜、收藏夹）
    - 热门国旗列表（中国、美国、日本、英国、法国）
    - 趣味小知识（10条国旗趣味知识）
  - 精简 ProfilePage，移除财会相关设置
  - 保留原有的颜色资源、工具类和应用结构

### 新增 (Added)
- **国旗画廊功能**：实现完整的国旗画廊页面
  - 从 flagame 项目复制了 195 个国家的国旗 SVG 文件到 `rawfile/flags/` 目录
  - 创建了 `countryData.ets` 数据文件，包含完整的国家信息（代码、中英文名称、首都、地区、人口、面积）
  - 实现洲际筛选功能：全部、亚洲、欧洲、非洲、美洲、大洋洲
  - 国旗网格展示（3列布局）
  - 点击国旗显示详情对话框，包含：国家名称、国旗大图、首都、地区、人口、面积
  - 人口和面积自动格式化显示（亿/万）

- **新增标签页图标**：使用 IconPark 图标包更新底部导航图标
  - 首页：home-two 图标
  - 画廊：picture-one 图标
  - 探索：compass-one 图标
  - 我的：user 图标
  - 每个图标都有普通（灰色 #8E8E93）和选中（蓝色 #1677FF + 浅蓝填充）两个版本
  - 同时创建了深色模式版本（普通白色，选中蓝色 + 深蓝填充）

---

## [历史版本]

### 修复 (Fixed)
- **个体户核定征收页面清理**：删除了错误添加的缴费基数字段
  - 删除了"社保缴费基数"输入框
  - 删除了"公积金缴费基数"输入框
  - 这些字段在计算逻辑中未被使用，属于之前错误添加的功能
  - 现在页面只保留营业收入和核定征收率两个输入项
- **加班费计算月计薪天数**：修复月计薪天数无法输入小数点的问题
  - 默认值已设置为 21.75（符合劳动法规定）
  - 将输入类型从 `InputType.Number` 改为 `InputType.Normal`，允许输入小数点
  - 使用 `validateNumberInput` 验证器，确保只允许数字和小数点
  - 计算逻辑正确处理小数天数
  - 符合《劳动法》规定的月计薪天数标准（21.75天）
  - 同时修复了加班小时数输入框，也改为 `InputType.Normal` 以支持小数输入
- **开票信息页面添加安全提示**：在开票信息详情页面添加了安全提示
  - 当用户保存了开票信息后，显示温馨提示："温馨提示：开票信息涉密，可使用系统自带应用锁保护。"
  - 提示显示在已保存且未修改状态下的按钮上方
  - 使用橙色背景和文字，提醒用户注意信息安全
- **开票信息页面添加删除功能**：在标题栏添加删除按钮
  - 创建了删除图标（`icon_delete.svg`），支持浅色和深色模式
  - 删除按钮仅在已保存开票信息时显示
  - 点击删除按钮后显示确认对话框，防止误操作
  - 确认删除后清除所有开票信息并清空表单
  - 添加了 `deleteInvoiceInfo()` 函数到 `invoiceInfoStore.ets`
  - 删除后显示成功提示，失败时显示错误提示

### 应用商店审查 (App Store Review)
- **新增应用商店审查报告**：创建了 `APP_STORE_REVIEW_REPORT.md`，全面审查应用商店上架要求
  - 检查了隐私政策、权限使用、外部链接、错误处理等常见拒绝问题
  - 识别出2个严重问题（隐私政策缺失、外部链接缺少用户确认）
  - 提供了详细的修复建议和优先级排序
  - 覆盖了华为应用市场和其他主流应用商店的要求
- **添加隐私政策入口**：在 `ProfilePage.ets` 中添加了"隐私政策"菜单项
  - 点击后跳转到华为云隐私政策页面
  - 使用与发票查验页面相同的外部链接处理机制
  - 支持通用 Intent 和华为浏览器两种跳转方式
  - 失败时显示友好的错误提示
- **外部链接跳转添加确认对话框**：修复了应用商店审查报告中的外部链接问题
  - `InvoiceVerifyPage.ets`：发票查验跳转前显示确认对话框
  - `ReportPage.ets`：税务违法举报跳转前显示确认对话框
  - 明确告知用户将跳转到外部网站（官方网站）
  - 提供"取消"和"前往"两个选项，让用户自主选择
  - 符合应用商店对外部链接跳转的要求

### 更新 (Updated)
- **知识页面添加个人所得税专项附加扣除条目**：在 `KnowledgePage.ets` 中添加了"个人所得税专项附加扣除"条目
  - 使用 `knowledgeData.ets` 中的详细版本（包含7项专项附加扣除的完整说明）
  - 包含每项扣除的标准、适用条件、扣除方式、扣除期限等详细信息

### 删除 (Removed)
- **清理未使用的页面和组件**：删除了未使用和重复的页面文件
  - 删除了 `CitySelectPage.ets`：旧的省市选择页面，已被 `CityEditPage` 替代
  - 删除了 `MarginPage.ets`：未使用的组件页面
  - 删除了 `VatPage.ets`：未使用的组件页面
  - 删除了 `InvoiceCheckPage.ets`：未使用的组件页面
  - 删除了 `MarginDetailPage.ets`：未使用的详情页面
  - 删除了 `VatDetailPage.ets`：未使用的详情页面
  - 删除了 `DepreciationDetailPage.ets`：未使用的详情页面
  - 删除了 `InvoiceCheckDetailPage.ets`：未使用的详情页面
  - 删除了 `review.md`：工具页面审查文档（已过时）
  - 从 `main_pages.json` 中移除了已删除页面的路由配置
  - 简化了代码库结构，提升了维护性

### 代码审查 (Code Review)
- 补充 2025-12-07 审查条目：新增年终奖合并计税误差、工资个税累计预扣偏差、税务日历未使用节点数据、整数输入组件无法清空等问题，详情见 `CODE_REVIEW_ISSUES.md`
- 二次审查：新增全局高/中/低优先级问题列表（覆盖收藏初始化、导航失败提示、输入必填校验、静态税率口径说明、金额格式化等），详见 `CODE_REVIEW_ISSUES.md`
- 新增 `CODE_REVIEW_SUMMARY_2025-12-07.md`：沉淀最新审查要点与优先级

### 修复 (Fixed)
- **个税单月预扣模式**：`SalaryTaxPage.ets` 改为按单月预扣税率表计算，不再使用累计预扣法，界面提示同步更新
- **个税页面城市上限同步**：`SalaryTaxPage.ets` 读取 `CityEditPage` 保存的 `currentCityMaxBase`，兼容旧字段并在缺失时回退城市预设/默认值，确保社保和公积金上限与设置保持一致
- **年终奖合并计税计算修复**：修复了年终奖合并计税的计算错误
  - 创建了 `calculateAnnualTax()` 辅助方法，正确计算年度综合所得应纳税额
  - 修复了合并计税时使用错误税率的问题：现在分别计算工资和工资+年终奖的税额，再取差值
  - 避免了当年终奖推高税率档位时，对工资部分错误计税的问题
  - 确保合并计税结果的准确性，符合税法规定

- **工资个税累计预扣法修复**：实现了正确的累计预扣法计算
  - 添加了"当前月份"输入字段（1-12月）
  - 创建了 `calculateTaxFromAnnualBrackets()` 辅助方法，使用年度税率表计算税额
  - 实现了正确的累计预扣公式：当月应预扣税额 = 累计应纳税额 - 累计已预扣税额
  - 假设每月收入相同，根据当前月份计算累计应纳税所得额
  - 修复了之前"当月×12套年度表÷12"的简化算法导致的偏差
  - 在不同月份下，税额计算更加准确，特别是中高收入场景

- **整数输入验证器空值处理**：修复了 InputValidator 无法保持空值的问题
  - 为 `validateIntegerInput()` 添加了 `allowEmpty` 参数（默认为 true）
  - 当允许空值时，空字符串直接返回，不会强制填充为 '0'
  - 用户现在可以正常清空整数输入字段（如贷款期限、滞纳天数等）
  - 避免了删除内容后立即变成0的体验问题
  - 让上层逻辑自行决定是否必填，分离了验证职责

- **税务日历数据与计算脱节**：修复了 TaxCalendarPage 的截止日期计算
  - 重写了 `calculateNextDeadline()` 方法，综合考虑所有截止日期节点
  - 支持月度申报节点（次月15日）和年度节点（5/31汇算、6/30个税年报等）
  - 遍历所有 deadlines 数据，找到距离当前日期最近的截止日期
  - 对所有节点统一应用周末顺延逻辑
  - 支持跨年计算，年度节点过期后自动计算下一年度
  - 显示的"下次申报截止"现在准确反映最近的重要节点
  - 用户可以看到正确的倒计时天数和截止日期

- **计算器振动功能修复**：完整实现了计算器的振动反馈功能
  - 在 `module.json5` 中添加了 `ohos.permission.VIBRATE` 权限声明（这是振动不工作的根本原因）
  - 添加了权限说明资源 `vibrate_permission_reason`，用于向用户解释权限用途
  - 改用预设的触摸反馈效果 `haptic.clock.timer`，提供更好的触觉体验
  - 使用 Promise 方式处理振动API调用，提升代码可靠性
  - 现在按键操作时会有明显的振动反馈，提升用户体验

### 改进 (Improved)
- **我的页面城市展示优化**：当前城市显示最多两行并自动省略，长城市名称或基数不再溢出
- **工资个税计算器全面优化**：改进了个税计算器的用户体验和准确性
  - 移除了社保缴费基数的默认值（之前固定为 5975）
  - 税前月薪输入时**实时同步**到社保缴费基数和公积金缴费基数（每个字符都同步，不只是第一位）
  - 新增公积金缴费比例输入（5%-40%，默认12%），支持不同城市的缴费政策
  - 公积金比例大于12%时显示橙色提示，提醒用户确认是否正确
  - 公积金比例最高支持40%，超过自动修正为40%
  - 计算时使用用户设置的公积金比例，而非固定的12%
  - 五险一金明细对话框优化：比例紧跟项目名称显示，金额靠右对齐，布局更清晰易读
  - 优化了结果显示：将"明细"按钮放在"五险一金"文字旁边，布局更合理
  - 文字简化：将"五险一金合计（个人）"改为"五险一金"，更简洁清晰
  - 优化页面布局：计算结果显示在输入区域之后、操作按钮之前，符合用户直觉
  - 使用月度税率表进行单月计算，确保税额准确（如18000工资 → 685元税）
  - reset 功能现在会正确重置所有输入字段包括当前月份和公积金比例
  - 减少了重复输入，提升了输入效率

- **大写转换页面长文本支持**：优化了人民币大写转换页面的结果显示
  - 移除了3行文本限制和省略号，支持完整显示任意长度的大写金额
  - 将复制按钮移到标题旁边，提供更清晰的布局
  - 添加了长按文本复制功能（`CopyOptions.LocalDevice`）
  - 设置了合适的行高（32px），确保多行文本清晰易读
  - 整个页面支持滚动，可以查看非常长的大写转换结果
  - 适配极大金额（如999,999,999,999.99元）的大写显示

### 新增 (Added)
- **五险一金计算**：新增“税前工资”输入，自动同步并封顶到社保/公积金基数，体验与工资个税页保持一致
- **小测验完成提醒**：进入小测验页时若已答完全部题目，弹出提示，点击“好的”自动退出
- **勘误反馈入口**：在"我的"页面添加了"勘误反馈"选项
  - 点击后显示反馈方式对话框
  - 提供应用商店评论和邮件反馈两种方式
  - 邮箱地址：ssz2048@163.com
  - 方便用户报告错误和提供建议

- **独立城市编辑页面**：创建了独立的城市编辑页面，提供更灵活的城市和缴费基数管理
  - 新增 `CityEditPage.ets` 页面，用于编辑当前城市和缴费基数
  - 允许用户从预设城市列表中选择，或自定义输入城市名称
  - 即使选择了预设城市，也可以自定义修改缴费基数上限
  - 提供城市搜索功能，快速查找预设城市
  - 使用 AmountInput 组件输入缴费基数，支持快捷输入
  - 保存后数据持久化，在"我的"页面显示城市和缴费基数
  - 修改了 ProfilePage，将城市对话框改为跳转到独立页面
  - 移除了 ProfilePage 中的所有对话框代码（`CityDialog`, `OtherCityDialog`, `saveCity` 等）
  - 清理了不再使用的状态变量（`searchCityText`, `filteredCities`, `allCities`, `customCityName`, `isOtherCity` 等）
  - 简化了数据存储结构，使用 `currentCityMaxBase` 统一存储基数
  - 提升了用户体验，提供更灵活的城市管理方式
  - 代码更加模块化，职责更加清晰

- **计算器数字大写转换功能**：在计算器右上角添加了大写转换功能
  - 在振动图标前添加了"大"字图标按钮
  - 点击后弹出对话框显示当前数字的大写形式（人民币大写格式）
  - 对话框包含"复制"和"关闭"按钮，方便快速复制大写金额
  - 复用了人民币大写转换器的转换逻辑，支持整数和小数
  - 支持负数转换（显示"负"字前缀）
  - 对话框内容支持滚动显示，可处理非常长的数字大写转换结果
  - 数字显示最多3行，超出部分用省略号显示
  - 大写文本支持长按复制，提供多种复制方式
  - 对话框宽度限制为400px，在大屏设备上也能保持良好显示
  - 适用于快速将计算结果转换为财务文档中的大写金额

### 优化 (Optimizations)
- **计算器使用提示**：在进入计算器页面时显示操作提示
  - 页面加载时在底部显示 Toast 提示"点击结果可复制"
  - 提示用户可以点击显示屏复制计算结果
  - 提升了功能的可发现性和用户体验

- **振动图标优化**：重新绘制了计算器的振动图标，使其更清晰可见
  - 将振动图标的线条粗细从 2 增加到 5（增加了 150% 粗细）
  - 更新了浅色和深色主题下的所有振动图标（开启和关闭状态）
  - 提升了图标的视觉清晰度和识别度，线条更粗更醒目
  - 在小尺寸（24x24px）下也能清晰辨识

### 新增 (Added)
- **城市数据管理和城市选择功能**：实现了完整的城市选择和缴费基数上限管理功能
  - 创建了 `cityData.ets` 文件，包含主要城市的缴费基数上限数据（约40个城市）
  - 在设置页面中将"当前省市"改为"当前城市"，显示城市名称和缴费基数上限
  - 城市列表显示城市名称和对应的缴费基数上限（元/月）
  - 添加了"其他城市"选项，允许用户手动输入城市名称和缴费基数上限
  - 城市选择支持搜索功能，方便快速查找
  - 所有城市设置会持久化保存，包括自定义城市信息
  - 五险一金计算器和个税计算器（工资）会自动读取用户选择的城市和缴费基数上限
  - 计算器会根据选择的城市自动应用对应的缴费基数上限进行验证和计算
  - 提升了计算的准确性和灵活性，支持不同城市的个性化设置
- **知识库专项附加扣除内容完善**：更新了知识库中"个人所得税专项附加扣除"的详细内容
  - 添加了7项专项附加扣除的详细说明，包括扣除标准、适用条件、扣除方式和注意事项
  - 1. 子女教育：每个子女1000元/月，3岁至博士研究生教育阶段
  - 2. 继续教育：学历教育400元/月（最长48个月），职业资格3600元/年
  - 3. 大病医疗：年度最高80000元，扣除医保报销后个人负担超过15000元的部分
  - 4. 住房贷款利息：1000元/月，首套住房最长240个月
  - 5. 住房租金：800-1500元/月，按城市级别区分
  - 6. 赡养老人：2000元/月，赡养60岁以上父母
  - 7. 3岁以下婴幼儿照护：每个子女1000元/月
  - 添加了申报方式和注意事项说明
  - 在工资薪金个税计算页面添加了跳转链接，点击可查看详细说明

- **个体户核定征收页面添加社保和公积金缴费基数字段**：在 IndividualTaxPage 中添加了社保缴费基数和公积金缴费基数输入字段
  - 添加了社保缴费基数输入字段，默认值为 5975 元
  - 添加了公积金缴费基数输入字段
  - 两个字段都使用 AmountInput 组件，支持快捷输入功能
  - 字段位于营业收入输入框下方，保持界面布局一致性

- **个税计算器（工资）页面重构五险一金输入**：将"五险一金"输入框改为分别输入社保缴费基数和公积金缴费基数
  - 移除了"五险一金"统一输入框
  - 添加了社保缴费基数输入字段，默认值为 5975 元
  - 添加了公积金缴费基数输入字段
  - 更新了计算逻辑，根据基数和费率自动计算五险一金个人部分总额
  - 社保个人部分费率：养老保险8% + 医疗保险2% + 失业保险0.5% = 10.5%
  - 公积金个人部分费率：12%
  - 五险一金总额 = 社保基数 × 10.5% + 公积金基数 × 12%
  - 更新了验证逻辑，分别校验两个基数的有效性
  - 更新了重置逻辑，重置时恢复社保缴费基数默认值

### 修复 (Fixed)
- **五险一金计算器添加缴费基数封顶限制**：为五险一金计算器添加了缴费基数上限（封顶）功能
  - 添加了北京地区2024年缴费基数上限：31884元/月（社平工资的3倍）
  - 当输入的缴费基数超过上限时，自动按上限计算并显示警告提示
  - 在输入区域显示缴费基数上限说明
  - 在说明区域添加了封顶值的详细说明
  - 提升了计算的准确性和合规性

- **个税计算器（工资）添加社保和公积金缴费基数封顶限制**：为个税计算器中的社保和公积金缴费基数添加了上限验证
  - 添加了社保缴费基数上限：31884元/月
  - 添加了公积金缴费基数上限：31884元/月
  - 当输入的基数超过上限时，显示错误提示，要求用户输入有效值
  - 确保个税计算的准确性

- **修复静态方法中使用 this 的编译错误**：修复了 `InputValidator.validatePercentageInput()` 方法中在静态方法内使用 `this` 导致的 ArkTS 编译错误
  - 将 `this.validateNumberInput(value)` 改为 `InputValidator.validateNumberInput(value)`
  - 在 ArkTS 中，静态方法不能使用 `this`，必须使用类名调用静态方法
  - 修复了编译错误，代码现在可以正常编译

- **修复税务日历跨年顺延不正确问题**：修复了当12月15日落在周末时，跨年场景下的天数和显示日期计算偏差的问题
  - 修改 `AdjustedDate` 接口，添加 `year` 字段以返回调整后的年份
  - 修改 `adjustForWeekend` 方法，返回调整后的年份、月份和日期
  - 在 `calculateNextDeadline` 中使用调整后的年份创建截止日期，确保跨年场景下计算正确
  - 修复了周末顺延跨年时年份不更新的问题

- **修复文本朗读初始化缺少上下文问题**：修复了 `TextReaderUtil.startRead` 在未初始化时可能使用 null 上下文的问题
  - 将 `context` 作为必传参数传入 `startRead` 方法，确保初始化时始终有有效的上下文
  - 更新了 `KnowledgeDetailPage` 中的调用，传入 `this.context` 参数
  - 避免了空指针异常，提升了代码的健壮性

- **修复工具页网格列数注释不一致问题**：更新了 `getGridColumns` 方法的注释，使其与实际实现保持一致
  - 将注释从"根据屏幕宽度动态调整列数"改为"固定使用3列布局"
  - 注释现在准确反映了实际实现，避免了误解

### 新增 (Added)
- **创建统一的输入验证工具类**：新增 `InputValidator` 工具类，提供标准化的输入验证方法
  - `validateNumberInput()` - 验证数字输入（允许小数点）
  - `validateIntegerInput()` - 验证整数输入（不允许小数点）
  - `validatePercentageInput()` - 验证百分比输入（0-100）
  - `validateBankAccount()` - 验证银行账号（纯数字）
  - `validatePhone()` - 验证电话号码（数字、空格、横线、括号）
  - 所有验证方法统一管理，便于维护和扩展

### 优化 (Optimizations)
- **全面加强数字输入验证**：为所有数字输入组件添加了严格的输入验证，已完成全部11个页面的修复
  - ✅ **已修复页面（11个）**：
    1. `AmountInput.ets` - 金额输入组件（使用 `validateNumberInput`）
    2. `InvoiceInfoPage.ets` - 开票信息页面（银行账号使用 `validateBankAccount`，电话使用 `validatePhone`）
    3. `TaxPenaltyPage.ets` - 税款滞纳金计算（滞纳天数使用 `validateIntegerInput`）
    4. `LoanCalcPage.ets` - 贷款计算器（利率用 `validateNumberInput`，期限用 `validateIntegerInput`）
    5. `InvestmentReturnPage.ets` - 投资收益（收益率用 `validatePercentageInput`，年限用 `validateNumberInput`）
    6. `CompoundInterestPage.ets` - 复利计算（收益率用 `validatePercentageInput`，年限用 `validateNumberInput`）
    7. `OvertimePage.ets` - 加班费计算（小时数和计薪天数用 `validateNumberInput`）
    8. `SeverancePage.ets` - 离职补偿金（工作年限用 `validateNumberInput`）
    9. `CorporateTaxPage.ets` - 企业所得税（所得额用 `validateNumberInput`）
    10. `SalaryTaxPage.ets` - 工资税收（月工资用 `validateNumberInput`）
    11. `DepreciationPage.ets` - 折旧摊销（原值用 `validateNumberInput`，年限用 `validateIntegerInput`）
  - 所有页面现在都使用统一的 `InputValidator` 工具类进行输入验证
  - 根据不同的输入场景选择合适的验证方法（数字、整数、百分比等）
  - 提升了数据输入的准确性和用户体验，防止非法字符导致的计算错误

### 修复 (Fixed)
- **修复三个页面的返回按钮失效问题**：修复了计算器、收藏和财务审核清单页面的系统返回按钮失效问题
  - 问题原因：MenuBuilder 中的 Row 组件设置了 `.width('100%')`，导致菜单区域占据整个标题栏宽度
  - 菜单区域过宽覆盖了左侧返回按钮的点击区域，使返回按钮无法响应点击事件
  - 修复方案：移除 MenuBuilder 中 Row 的 `.width('100%')` 属性，只保留必要的 `.height('100%')`
  - 修复页面：
    - `CalculatorPage.ets` - 计算器页面
    - `FavoritesPage.ets` - 收藏页面
    - `ReimbursementChecklistPage.ets` - 财务审核清单页面
  - 现在这三个页面的返回按钮可以正常点击，右上角的菜单按钮也能正常工作

- **全量修复硬编码颜色**：全量检查并修复了所有页面中的硬编码颜色值，完全支持深色模式
  - 修复了以下页面的硬编码颜色：
    - `ReimbursementEntryPage.ets`：会计分录模板页面（21处颜色）
    - `CurrencyRatePage.ets`：货币牌价页面（23处颜色）
    - `VatPage.ets`：增值税计算页面（8处颜色）
    - `InvoiceCheckPage.ets`：发票验真页面（4处颜色）
    - `VatDetailPage.ets`：增值税详情页面背景色
    - `DepreciationDetailPage.ets`：折旧详情页面背景色
    - `MarginDetailPage.ets`：利润率详情页面背景色
    - `InvoiceCheckDetailPage.ets`：发票查验详情页面背景色
  - 以下页面的硬编码颜色为数据属性（用户可自定义），保持不变：
    - `ReimbursementChecklistPage.ets`：审核清单分类颜色
    - `ReimbursementProcessPage.ets`：报销流程步骤颜色
    - `ToolsPage.ets`：工具分类颜色
  - 已忽略的页面：
    - `PageSeparatorSettings.ets`：数字分位设置（无硬编码颜色）
    - `CitySelectPage.ets`：城市选择（无硬编码颜色）
  - 所有 UI 颜色已替换为资源引用，完全支持深色和浅色模式自动切换

- **税务违法举报页面颜色修复**：修复了税务违法举报页面中所有硬编码的颜色值，支持深色模式
  - 将所有硬编码颜色替换为资源引用：
    - `#FFFFFF` → `$r('app.color.bg_card')` / `$r('app.color.text_white')`
    - `#FA5151` → `$r('app.color.color_red')`
    - `#1A1A1A` → `$r('app.color.text_primary')`
    - `#666666` → `$r('app.color.text_secondary')`
    - `#F0F0F0` → `$r('app.color.gray_border')`
    - `#FA8C16` → `$r('app.color.color_orange')`
    - `#FFF7E6` → `$r('app.color.bg_orange_light')`
    - `#1677FF` → `$r('app.color.button_primary')`
    - `#8E8E93` → `$r('app.color.text_tertiary')`
    - `#F5F6F7` → `$r('app.color.bg_page')`
  - 修复了错误提示、举报说明、举报类型、举报方式、举报须知、联系方式等所有区块的颜色
  - 现在页面在深色和浅色模式下都能正确显示，颜色会根据主题自动切换

- **知识库页面"立即阅读"按钮深色模式显示优化**：修复了顶部卡片中"立即阅读"按钮在深色模式下颜色不够清楚的问题
  - 将按钮背景色从半透明白色（白色 + 0.2 透明度）改为卡片背景色（`bg_card`），适配深色模式
  - 将按钮字体颜色从白色改为主题色（`button_primary`），提高对比度和可读性
  - 增加了字体大小和字重设置，使按钮更醒目
  - 现在在深色模式和浅色模式下都有良好的视觉效果

### 变更 (Changed)
- **暂时隐藏当前省市功能**：在设置页面中暂时隐藏"当前省市"设置项
  - 注释了"当前省市"设置项及其分隔线的显示代码
  - 保留了相关逻辑代码，方便后续恢复功能

### 修复 (Fixed)
- **开票信息详情页面数据填充问题修复**：修复了开票信息详情页面无法自动填入已保存信息的问题
  - 添加了 `isLoading` 状态来控制页面加载流程，确保数据加载完成后才显示表单
  - 在数据加载期间显示加载状态提示，提升用户体验
  - 为表单容器添加了基于数据的 key，确保数据加载后表单正确重新渲染
  - 修复了 TextInput 组件的初始化时机问题，现在已保存的信息能够正确显示在输入框中

### 修复 (Fixed)
- **修复金额输入组件颜色硬编码问题**：将 AmountInput 组件中的硬编码颜色值替换为资源引用，支持深色模式
  - 修复标签文字颜色（#666666 → text_secondary）
  - 修复输入框背景色（#F5F5F5 → bg_secondary）
  - 修复快捷输入按钮文字颜色（#1677FF → button_primary）
  - 修复快捷输入按钮背景色（#E6F4FF → bg_blue_light）
  - 所有颜色值已统一替换为颜色资源引用，支持深色模式自动切换

- **修复工具页面颜色硬编码问题**：将所有工具页面的硬编码颜色值替换为资源引用，支持深色模式
  - 修复计算工具页面：MarginPage、ExchangeRatePage、CompoundInterestPage、InvestmentReturnPage、SeverancePage、RmbUpperCasePage、BreakEvenPage、ProfitMarginPage、LoanCalcPage、DepreciationPage、OvertimePage
  - 修复发票相关页面：InvoiceVerifyPage、InvoiceTypePage
  - 修复税务相关页面：TaxPenaltyPage、TaxCalendarPage、TaxRateListPage、TaxLawLibraryPage、TaxpayerTypePage
  - 修复报销相关页面：ReimbursementProcessPage、ReimbursementChecklistPage
  - 修复其他工具页面：AccountingSubjectPage、ExcelFormulasPage、ToolsPage
  - 所有颜色值已统一替换为颜色资源引用（text_primary、text_secondary、text_tertiary、bg_card、bg_page、bg_secondary、button_primary、color_red、color_green、color_orange、bg_blue_light、bg_green_light、bg_yellow_light等）
  - 支持深色模式自动切换，提升了应用在不同主题环境下的视觉体验
  - 修复了页面背景色、文字颜色、按钮颜色、卡片背景色等所有UI元素的颜色硬编码问题

### 修复 (Fixed)
- **修复工具页面颜色硬编码问题**：将所有工具页面的硬编码颜色值替换为资源引用
  - 修复 BonusTaxPage.ets 中的颜色硬编码（#FFFFFF、#1A1A1A、#666666、#FA5151、#1677FF、#F0F0F0、#F5F5F5、#F5F6F7 等）
  - 修复 InsurancePage.ets 中的颜色硬编码（#FFFFFF、#1A1A1A、#666666、#FA5151、#8E8E93、#1677FF、#52C41A、#F5F6F7 等）
  - 修复 SmallVatPage.ets 中的颜色硬编码（#FFFFFF、#1A1A1A、#666666、#FA5151、#1677FF、#F0F0F0、#F5F5F5、#F5F6F7、#52C41A 等）
  - 修复 GeneralVatPage.ets 中的颜色硬编码（#1A1A1A、#666666、#FFFFFF、#FA5151、#1677FF、#F5F5F5、#F5F6F7、#52C41A 等）
  - 修复 IndividualTaxPage.ets 中的颜色硬编码（#FFFFFF、#1A1A1A、#666666、#FA5151、#1677FF、#F0F0F0、#F5F5F5、#F5F6F7 等）
  - 修复 CorporateTaxPage.ets 中的颜色硬编码（#FFFFFF、#1A1A1A、#666666、#FA5151、#1677FF、#F0F0F0、#F5F5F5、#F5F6F7、#52C41A 等）
  - 修复 SurtaxPage.ets 中的颜色硬编码（#FFFFFF、#1A1A1A、#666666、#FA5151、#1677FF、#F0F0F0、#F5F5F5、#F5F6F7、#8E8E93 等）
  - 修复 StampTaxPage.ets 中的颜色硬编码（#FFFFFF、#1A1A1A、#666666、#FA5151、#F0F0F0、#F5F6F7、#8E8E93 等）
  - 修复 DividendTaxPage.ets 中的颜色硬编码（#FFFFFF、#1A1A1A、#666666、#FA5151、#1677FF、#F0F0F0、#F5F5F5、#F5F6F7、#52C41A 等）
  - 所有颜色值已统一替换为颜色资源引用，支持深色模式适配

### 优化 (Optimizations)
- **编辑和完成图标深色模式支持**：为财务审核清单页面和我的收藏页面的编辑/完成图标创建了深色模式版本
  - 创建了 `dark/media/icon_edit.svg` 和 `dark/media/icon_done.svg`
  - 深色模式下使用白色（#FFFFFF）描边，确保在深色背景下清晰可见
  - 移除了 `colorFilter`，让系统自动根据主题选择对应的图标资源（base 或 dark 目录）
  - 浅色模式：使用深色图标（#333333）
  - 深色模式：使用白色图标（#FFFFFF），图标更白更清晰
  - 提升了深色模式下的视觉体验和可读性

- **常用公式页面复制图标深色模式支持**：为常用公式页面的复制图标创建了深色模式版本
  - 创建了 `dark/media/icon_copy.svg`，深色模式下使用白色（#FFFFFF）描边
  - 系统会根据当前主题自动选择对应的图标资源（base 或 dark 目录）
  - 图标颜色通过 `colorFilter` 使用 `gray_disabled` 颜色资源，在深色模式下会自动适配
  - 提升了深色模式下的视觉体验和可读性

- **深色模式 Title bar 和 Tabbar 颜色优化**：将深色模式下的 Title bar 和 Tabbar 颜色改为纯黑色
  - 添加了新的颜色资源 `bg_title_bar` 和 `bg_tab_bar`
  - 浅色模式：使用白色（#FFFFFF）
  - 深色模式：使用纯黑色（#000000）
  - 在 Index.ets 中将 Title bar 和 Tabbar 的背景色从 `bg_card` 改为专用的颜色资源
  - 提升了深色模式下的视觉体验，Title bar 和 Tabbar 现在使用纯黑色背景

### 修复 (Fixed)
- **缺失颜色资源修复**：添加了缺失的 `bg_orange_light` 颜色资源
  - 在 `base/element/color.json` 和 `dark/element/color.json` 中添加了 `bg_orange_light` 颜色资源
  - 浅色模式：使用 `#FFF7E6`（浅橙色背景）
  - 深色模式：使用 `#3A2A1A`（深色橙色背景）
  - 修复了 ReportPage.ets 中引用不存在的颜色资源导致的编译错误

- **常用公式页面颜色修复**：修复了常用公式页面中所有硬编码的颜色值
  - 将所有硬编码的颜色值替换为资源引用，包括：
    - `#FFFFFF` -> `$r('app.color.text_white')` 或 `$r('app.color.bg_card')`
    - `#666666` -> `$r('app.color.text_secondary')`
    - `#1677FF` -> `$r('app.color.button_primary')`
    - `#F5F5F5` -> `$r('app.color.bg_secondary')`
    - `#8E8E93` -> `$r('app.color.text_tertiary')`
    - `#1A1A1A` -> `$r('app.color.text_primary')`
    - `#F9F9F9` -> `$r('app.color.bg_tertiary')`
    - `#F5F6F7` -> `$r('app.color.bg_page')`
    - `#CCCCCC` -> `$r('app.color.gray_disabled')`
  - 修复了分类按钮、公式卡片、文本、背景等所有元素的颜色
  - 现在支持深色和浅色两种主题模式，颜色会根据主题自动切换

- **税款滞纳金页面颜色修复**：修复了税款滞纳金页面中所有硬编码的颜色值
  - 将所有硬编码的颜色值替换为资源引用，包括：
    - `#666666` -> `$r('app.color.text_secondary')`
    - `#1A1A1A` -> `$r('app.color.text_primary')`
    - `#FA5151` -> `$r('app.color.color_red')`
    - `#FFFFFF` -> `$r('app.color.bg_card')` 或 `$r('app.color.text_white')`
    - `#8E8E93` -> `$r('app.color.text_tertiary')`
    - `#F5F6F7` -> `$r('app.color.bg_page')`
    - `#F5F5F5` -> `$r('app.color.bg_secondary')`
  - 修复了输入框、按钮、文本、背景等所有元素的颜色
  - 现在支持深色和浅色两种主题模式，颜色会根据主题自动切换

- **开票信息页面加载问题修复**：修复了开票信息详情页面无法正确加载已保存信息的问题
  - 修复了 context 初始化时机问题，确保在 `aboutToAppear` 中正确初始化 context
  - 改进了数据加载逻辑，添加了详细的日志输出便于调试
  - 修复了 TextInput 的绑定问题，确保已保存的信息能正确显示在输入框中
  - 移除了无效的 `onPageShow` 方法（在 @Component 中不会被调用）
  - 现在进入开票信息页面时，已保存的信息会正确填充到各个输入框中

- **资源引用语法错误修复**：修复了 DividendTaxPage.ets、StampTaxPage.ets 和 SurtaxPage.ets 中的资源引用语法错误
  - 修复了所有错误的资源引用格式，从 `'$r('app.color.xxx')'` 改为正确的 `$r('app.color.xxx')`
  - 移除了资源引用末尾多余的引号，解决了编译错误
  - 所有资源引用现在使用正确的语法格式

### 优化 (Optimizations)
- **知识详情页面朗读图标优化**：将朗读图标颜色改为黑色版本，并添加深色模式支持
  - 朗读图标未激活状态的颜色从灰色（text_secondary）改为黑色（text_primary）
  - 朗读中状态仍保持蓝色（button_primary）显示
  - 创建了朗读图标的深色模式版本（icon_voice.svg），深色模式下使用白色（#FFFFFF）描边
  - 系统会根据当前主题自动选择对应的图标资源，参考分享图标的实现方式
  - 提升了图标的可读性和视觉一致性，支持深色和浅色两种主题模式

### 删除 (Removed)
- **删除 SettingsPage.ets**：移除了未完成的设置页面
  - SettingsPage 中的通知设置和深色模式功能未实现，且与 ProfilePage 功能重复
  - 所有设置功能已统一在 ProfilePage 中实现

### 优化 (Optimizations)
- **开票信息页面按钮优化**：保存后按钮变为"复制"和"编辑"
  - 当开票信息已保存且未修改时，显示"复制"和"编辑"按钮
  - 点击"复制"按钮可将开票信息复制到剪贴板
  - 点击"编辑"按钮后允许修改，按钮自动变为"保存"
  - 当信息未保存或已修改时，显示"保存"按钮
  - 实时检测字段修改状态，自动切换按钮显示
  - 提升了用户体验，方便快速复制和编辑开票信息

- **开票信息对话框优化**：删除内容区域的"点击复制"提示文字
  - 移除了对话框内容区域中的"点击复制"提示文字
  - 简化了对话框界面，用户可通过底部的"复制"按钮进行复制操作
  - 提升了界面简洁性

- **开票信息页面加载优化**：修复进入页面时未自动填入已保存信息的问题
  - 优化了 `loadInvoiceInfo()` 方法，确保所有字段都被正确加载和显示
  - 改进了数据加载逻辑，确保在页面进入时能正确填充已保存的开票信息
  - 添加了数据验证，确保只有在有有效数据时才填充字段
  - 优化了 TextInput 组件的绑定，使用 `value || ''` 确保始终有有效值
  - 修复了状态更新时机问题，确保 UI 能正确响应数据变化

- **深色模式选择框优化**：移除选择框选项中的"模式"字样
  - 将"浅色模式"改为"浅色"
  - 将"深色模式"改为"深色"
  - 更新了 `getThemeText()` 方法，保持显示文本与选择框选项一致
  - 简化了选项文本，提升了界面简洁性

### 修复 (Fixed)
- **修复颜色硬编码问题**：将所有硬编码的颜色值替换为资源引用
  - 修复 SalaryTaxPage.ets 中的颜色硬编码（#F0F0F0、#FA5151、#1677FF、#1A1A1A、#666666、#F5F5F5、#F5F6F7 等）
  - 修复 InvoiceInfoPage.ets 中的颜色硬编码（#8E8E93、#1677FF、#F5F6F8、#333333、#FFFFFF 等）
  - 修复 GeneralVatPage.ets 中的颜色硬编码（#1A1A1A、#666666、#FFFFFF、#FA5151 等）
  - 修复 KnowledgePage.ets 中的颜色硬编码（#33FFFFFF、#8E8E93、#FFFFFF 等）
  - 修复 CalculatorPage.ets 中的颜色硬编码（#1F000000）
  - 修复 HomePage.ets 中的颜色硬编码（#69B1FF）
  - 修复 ReimbursementChecklistPage.ets 中的颜色硬编码（#1A1A1A、#666666、#FFFFFF、#FA5151、#1677FF、#F5F5F5、#F5F6F7 等）
  - 修复 KnowledgeDetailPage.ets 中的颜色硬编码（#007DFF、#E6F2FF、#1677FF、#666666、#1A1A1A、#333333、#182431、#F1F3F5 等）
    - 修复了页面背景色（Navigation 和 Scroll 组件）
    - 修复了分类标签的颜色（文字和背景）
    - 修复了图标按钮的颜色（朗读、分享按钮）
    - 修复了所有文本内容的颜色（标题、子标题、正文、列表项）
  - 修复 QuizPage.ets 中的颜色硬编码（#8E8E93、#1677FF、#FFFFFF、#1A1A1A、#666666、#52C41A、#F6FFED、#D9D9D9、#E6F4FF、#FFF1F0、#FF4D4F、#F5F6F7 等）
    - 修复了进度指示器的颜色（文字和背景）
    - 修复了题目卡片的颜色（文字和背景）
    - 修复了选项卡片的颜色（选中、正确、错误状态）
    - 修复了解析区域的颜色（文字和背景）
    - 修复了按钮的颜色（禁用和启用状态）
    - 修复了完成页面的颜色（标题、描述、按钮）
    - 将 getOptionBgColor 和 getOptionTextColor 方法的返回类型从 string 改为 ResourceColor
    - 所有颜色值现在统一使用 `$r('app.color.xxx')` 资源引用，支持深色模式自动切换
  - 所有颜色值现在统一使用 `$r('app.color.xxx')` 资源引用，支持深色模式自动切换
  - 提升了代码的可维护性和主题适配能力

### 代码审查 (Code Review)
- **全面代码审查**：完成了对所有页面的代码审查，生成了详细的问题清单
  - 创建了 `CODE_REVIEW_ISSUES.md` 文档，记录了所有发现的问题
  - 发现未完成功能2个：SettingsPage 中的通知设置和深色模式功能未实现
  - 发现硬编码问题：颜色值、数字常量、字符串多处硬编码
  - 发现8个不一致问题：页面背景色、按钮样式、对话框样式、Toast持续时间、字体大小、间距值、错误处理、导航失败处理等
  - 发现7个主要优化方向：代码重复、性能优化、类型安全、代码组织、用户体验、可访问性、资源管理
  - 提供了优先级分类的改进建议

## [未发布]

### 新增

### 修复

- **分享应用链接优化**：使用华为应用市场 Web 链接格式
  - 从 `appmarket://` 协议改为 `https://appgallery.huawei.com/app/detail` 格式
  - 添加渠道追踪参数（channelId=SHARE&source=appshare）
  - 分享链接现在可以在任何平台打开，不仅限于 HarmonyOS 设备

- **五险一金计算器增强**：新增独立的公积金基数和比例设置
  - 社保缴费基数和公积金缴费基数分开输入，支持不同数值
  - 新增公积金缴费比例输入（5%-40%，默认12%）
  - 城市显示逻辑与工资个税计算器保持一致，显示城市名和基数上限
  - 移除单独显示的"缴费基数上限"提示，信息整合到城市显示中
  - 结果显示动态展示用户设置的公积金比例（个人和公司）
  - 公积金比例大于12%时显示橙色提示，提醒用户确认
  - 公积金比例最高支持40%，超过自动修正
  - 优化结果显示布局：比例紧跟项目名称，金额右对齐，清晰易读
  - 更新说明文字，提示社保和公积金基数可以不同
  - 验证逻辑优化，分别检查社保和公积金基数是否超限 (New Features)
- **主题设置功能**：实现了完整的主题切换功能
  - 在 ProfilePage 中添加了主题设置选项，支持三种模式：跟随系统、浅色模式、深色模式
  - 主题设置会持久化保存，应用启动时自动加载用户选择的主题
  - 更新了 EntryAbility，在应用启动时读取并应用保存的主题设置
  - 主题切换对话框与数字分位设置对话框保持一致的 UI 风格
  - 替换了 ProfilePage 中所有硬编码的颜色值为颜色资源
  - 提升了用户体验，用户可以根据个人喜好选择主题模式

- **深色主题图标支持**：为 ProfilePage 中的所有图标创建了深色主题版本
  - 创建了 `dark/media/` 目录，包含所有图标的深色版本
  - 深色主题下图标颜色从深色（#333333）改为浅色（#FFFFFF），确保在深色背景下清晰可见
  - 涉及的图标包括：我的收藏、当前省市、数字分位、征期提示、深色模式、分享应用、应用评分、关于应用
  - 系统会根据当前主题自动选择对应的图标资源
  - 提升了深色主题下的视觉体验和可读性

- **ToolsPage 暗色模式图标支持**：为工具页面中的所有图标创建了暗色版本
  - 为标题栏布局切换按钮（列表/网格）创建了暗色版本图标
  - 为所有工具图标创建了暗色版本，包括：个税计算器、五险一金、增值税、企业所得税、附加税、印花税、股权分红税、盈亏平衡点、毛利率、贷款计算器、折旧摊销、加班费、离职补偿金、人民币大写、投资收益、复利计算器、发票相关、税务日历、纳税人身份判断、报销管理等
  - 为列表布局中的箭头图标创建了暗色版本
  - 所有图标在暗色模式下使用白色（#FFFFFF）描边，确保在深色背景下清晰可见
  - 系统会根据当前主题自动选择对应的图标资源
  - 提升了工具页面在深色主题下的视觉体验和可读性

- **设置选择功能优化**：改进了数字分位和城市选择的实现方式
  - 城市选择从跳转页面改为对话框方式，与主题选择和数字分位选择保持一致
  - 城市选择对话框支持搜索功能，方便快速查找省市
  - 所有设置选择（主题、数字分位、城市）现在都使用统一的对话框 UI 风格
  - 选择后立即保存并更新显示，无需跳转页面
  - 提升了用户体验和界面一致性

- **分享应用功能增强**：在分享应用功能中添加了应用市场下载链接
  - 分享内容现在包含应用市场下载链接（appmarket://details?id=com.douhua.flag）
  - 方便用户通过分享链接直接下载应用
  - 提升了应用的传播效果

- **开票信息对话框优化**：重构了主页开票信息对话框，提供更好的用户体验
  - 改为自定义对话框，标题和内容各占一行，布局更清晰
  - 当已填写开票信息时，对话框显示完整信息并支持点击复制
  - 添加"点击复制"提示文字，点击内容区域即可复制开票信息到剪贴板
  - 按钮改为"复制"和"编辑"（有信息时）或"关闭"和"填写"（无信息时）
  - 提升了开票信息的查看和复制体验

### 优化 (Optimizations)
- **开票信息电话验证优化**：改进了注册电话的验证逻辑，区分座机号和手机号
  - 手机号：11位数字，以1开头，第二位为3-9，只能包含数字和空格
  - 座机号：7-11位数字（含区号），可以包含数字、横线、空格和括号
  - 提供更准确的格式验证和错误提示
  - 提升了数据输入的准确性

### 优化 (Optimizations)
- **计算器页面功能简化**：移除了声音反馈功能，仅保留振动反馈
  - 移除了 soundEnabled 状态变量和 triggerSound 方法
  - 移除了标题栏中的声音开关按钮
  - 简化了代码，提升了维护性

### 修复 (Bug Fixes)
- **返回按钮功能修复**：修复了从首页进入审核清单、计算器、收藏页时返回按钮无效的问题
  - 为ReimbursementChecklistPage、CalculatorPage、FavoritesPage添加了onBackPress回调处理
  - 确保返回按钮能够正常执行返回操作
- **知识详情页chip字体优化**：增大了知识详情页分类标签的字体大小
  - 将chip字体大小从10调整为12，提升可读性
- **报销流程页面chip样式优化**：修复了报销流程页面中人员chip的颜色和对齐问题
  - chip颜色已使用与左侧数字相同的颜色（step.color）
  - 调整了chip所在Row的高度为40，与左侧数字Circle高度一致，确保纵向居中对齐

### 新增 (New Features)
- **深色和浅色主题支持**：实现了完整的深色和浅色主题切换功能
  - 完善了 `base/element/color.json`，定义了浅色主题的所有颜色资源（40+ 种颜色）
  - 完善了 `dark/element/color.json`，为所有颜色提供了深色主题版本
  - 应用会根据系统主题自动切换颜色，支持深色和浅色两种模式
  - 颜色资源包括：背景色、文字色、主色调、按钮颜色、错误提示色、功能色等
  - 深色主题使用深色背景和浅色文字，浅色主题使用浅色背景和深色文字
  - 将所有硬编码的颜色值替换为使用 `$r('app.color.xxx')` 引用颜色资源
  - 涉及的主要页面：Index.ets、HomePage.ets、CalculatorPage.ets 等
  - 修改了 Builder 函数的参数类型，支持 ResourceColor 类型
  - 提升了应用在不同主题环境下的视觉体验和可读性

### 优化 (Optimizations)
- **常用公式页面布局优化**：增加了列表项内部内容的间距，使布局更宽松舒适
  - 列表项内边距从 16 增加到 20
  - 标题和描述之间的间距从 8 增加到 16
  - 描述和语法示例框之间的间距从 12 增加到 16
  - 语法示例框内边距从 12 增加到 16
  - 语法和示例之间的间距从 8 增加到 16
  - 列表项之间的间距从 12 增加到 16
  - 描述文本行高从 20 增加到 22
  - 提升了页面的可读性和视觉舒适度

### 修复 (Bug Fixes)
- **开票信息页面校验功能**：为开票信息各项字段添加了位数和文本类型校验
  - 公司抬头：限制最大长度为100个字符，不能为空
  - 纳税人识别号：必须为15位或18位，支持统一社会信用代码（18位数字和大写字母）或旧纳税人识别号（15位或18位数字），保存时自动转为大写
  - 注册地址：限制最大长度为200个字符，不能为空
  - 注册电话：限制最大长度为20个字符，只能包含数字、横线、空格和括号，至少包含6位数字，不能为空
  - 开户行：限制最大长度为100个字符，不能为空
  - 银行账号：必须为10-30位纯数字，不能为空
  - 为各输入框设置了合适的输入类型（电话号码、数字等）和最大长度限制
  - 保存时进行完整校验，校验失败时显示具体的错误提示信息
  - 提升了数据准确性和用户体验

### 优化 (Optimizations)
- **计算器反馈设置**：在计算器标题栏添加了振动和声音开关按钮
  - 添加了振动开关按钮（默认开启），点击键盘按钮时会有振动反馈
  - 添加了声音开关按钮（默认关闭），为声音反馈功能预留接口
  - 按钮图标会根据开关状态显示不同颜色（开启为蓝色，关闭为灰色）
  - 所有键盘操作（数字、运算符、等号、清除等）都会根据设置触发相应的反馈
  - 声音功能接口已预留，等待声音文件添加后即可实现
- **计算器复制功能**：点击计算器输入区域可以复制当前显示的数字
  - 点击显示屏区域即可复制当前显示的数字到剪贴板
  - 复制成功或失败时会显示 Toast 提示
  - 提升了用户体验，方便用户快速复制计算结果
- **常用公式页面文本优化**：移除了"语法"和"示例"标签后的冒号
  - 将"语法："改为"语法"
  - 将"示例："改为"示例"
  - 使界面更加简洁
- **计算器历史记录增强**：计算器现在支持显示最多3行历史记录
  - 将历史记录从单行字符串改为数组，最多存储3条记录
  - 新增 `addHistory()` 方法，自动管理历史记录数量
  - 历史记录以列表形式显示，最新的记录在底部
  - 提升了用户体验，用户可以查看最近的计算历史

### 修复 (Bug Fixes)
- **财务审核清单页面保存优化**：保存时自动过滤掉没有条目的分类
  - 在 `saveChecklists()` 方法中已实现过滤空分类的逻辑
  - 退出编辑模式时也会调用保存方法，确保空分类被自动移除
  - 提升了数据的一致性和用户体验

### 优化 (Optimizations)
- **财务审核清单页面按钮样式优化**：为编辑模式下的所有 Normal 按钮添加了 borderRadius
  - "保存"和"取消"按钮添加了 borderRadius(4)
  - "添加"按钮添加了 borderRadius(4)
  - "添加分类"按钮添加了 borderRadius(8)
  - 文本按钮（"编辑"和"删除"）保持无 borderRadius，符合设计规范
  - 提升了按钮的视觉一致性和美观度
- **发票与合规分类页面顶部边距优化**：移除了该分类下所有工具页面的顶部边距
  - 移除了"发票真伪查询"页面第一个内容区域的顶部边距
  - 移除了"发票类型说明"页面第一个内容区域的顶部边距
  - 移除了"开票税点列表"页面第一个内容区域的顶部边距
  - 移除了"税务日历"页面第一个内容区域的顶部边距
  - 移除了"会计科目汇总"页面第一个内容区域的顶部边距
  - 移除了"财税法规库"页面第一个内容区域的顶部边距
  - 提升了页面布局的一致性和视觉紧凑度
- **财务审核清单页面按钮优化**：将编辑/完成按钮移到 Navigation 标题栏
  - 移除了页面内的自定义标题栏 Row
  - 使用 Navigation 的 menus 功能，将编辑按钮放在标题栏右侧
  - 与我的收藏页面保持一致的设计风格
  - 提升了界面的一致性和用户体验
- **我的收藏页面按钮优化**：将编辑/完成按钮改为使用 SVG 图标
  - 使用 `icon_edit` 和 `icon_done` SVG 图标替代文字按钮
  - 图标颜色设置为蓝色（#1677FF），与整体 UI 风格保持一致
  - 提升了界面的专业性和视觉一致性
- **计算器页面宽度限制**：限制计算器页面内容区域最大宽度为 400vp
  - 在大屏设备上，计算器内容居中显示，最大宽度 400vp
  - 保持了小屏设备上的正常布局
  - 提升了大屏设备上的使用体验和视觉美观度
- **页面顶部边距优化**：移除了部分工具页面的顶部边距，使页面更紧凑
  - 移除了"纳税人身份判断"页面第一个内容区域的顶部边距
  - 移除了"税务违法举报"页面第一个内容区域的顶部边距
  - 提升了页面布局的一致性和视觉紧凑度

### 修复 (Bug Fixes)
- **ProfilePage 设置保存和显示修复**：修复了省市选择和千分位设置保存失败和显示不更新的问题
  - 修复了 `saveSeparatorSetting()` 和 `saveTaxDeadlineSetting()` 方法中 `prefs` 为 null 时不初始化的问题
  - 现在保存方法会在 `prefs` 为 null 时自动初始化
  - 添加了保存成功和失败的 Toast 提示，提升用户体验
  - 删除了无效的 `onPageShow()` 方法（在 @Component 中不会被调用）
  - 使用 `@Watch` 装饰器监听 `refreshKey` 变化，自动刷新数据
  - 在 `Index.ets` 中添加了 `onPageShow()` 生命周期方法，从其他页面返回时自动刷新当前标签页
  - 确保从 `CitySelectPage` 返回后，省市选择能立即显示更新
  - 确保千分位设置修改后能立即显示并保存

### 修复 (Bug Fixes)
- **我的收藏页面标题栏按钮修复**：修复了右上角"编辑"/"完成"按钮显示为灰色圆圈的问题
  - 使用 @Builder 自定义菜单构建器，替代 menus 数组配置
  - 按钮现在正确显示为蓝色文字而不是灰色圆圈
  - 修复了点击响应，编辑模式切换功能正常

### 优化 (Optimizations)
- **我的收藏页面图标优化**：将列表项前的 emoji 星号替换为 SVG 图标
  - 使用 `icon_favorite_selected` SVG 图标替代 emoji 星号（⭐）
  - 图标大小设置为 20x20，与其他页面保持一致
  - 提升了界面的专业性和视觉一致性
- **常用公式页面分类筛选优化**：分类按钮现在只高亮显示当前选中项
  - 选中状态：蓝色背景（#1677FF），白色文字
  - 未选中状态：浅灰色背景（#F5F5F5），深灰色文字
  - 提升了用户交互体验和视觉反馈
- **税务日历页面样式优化**：优化了申报截止倒计时卡片的视觉效果
  - 为倒计时数字区域添加了浅蓝色背景（#E6F4FF）和圆角
  - 增加了内边距和与右侧申报信息的间距（20px）
  - 移除了第一个内容区域的顶部 margin，让页面更紧凑
  - 提升了信息层次感和视觉吸引力
- **五险一金计算页面优化**：将缴费基数输入框改为使用 AmountInput 组件
  - 缴费基数输入框现在支持快捷输入按钮（00, 000, 0000）
  - 提升了输入体验和界面一致性
- **税务违法举报页面按钮优化**：将举报按钮改为红色警示样式
  - 按钮背景色改为红色（#FA5151），文字为白色
  - 与举报页面的警示主题保持一致
  - 提升了视觉冲击力和功能识别度
- **ProfilePage 内容宽度限制**：限制内容区域最大宽度为 400vp
  - 在大屏设备上，内容居中显示，最大宽度 400vp
  - 保持了小屏设备上的正常布局
  - 提升了大屏设备上的阅读体验和视觉美观度
- **计算器功能增强**：在键盘第一行添加了百分号和正负号按钮
  - 添加了 % 按钮，可将当前数字转换为百分比（除以100）
  - 添加了 +/- 按钮，可切换当前数字的正负号
  - 第一行按钮布局：%、+/-、C、删除
  - 自动调整按钮字体大小，多字符按钮使用较小字号
  - 提升了计算器的实用性和功能完整性
- **工具页面按钮样式统一**：将所有工具页面中的 Normal 和 Secondary 按钮改为使用默认白色背景样式
  - 移除了所有自定义的 `backgroundColor` 和 `fontColor` 设置
  - 统一使用系统默认的 Normal 按钮样式（白色背景）
  - 涉及页面包括：ReimbursementChecklistPage、ExcelFormulasPage、BonusTaxPage、DividendTaxPage、SalaryTaxPage、IndividualTaxPage、InsurancePage、InvestmentReturnPage、ExchangeRatePage、DepreciationPage、SeverancePage、RmbUpperCasePage、CompoundInterestPage、OvertimePage、TaxPenaltyPage、StampTaxPage、CorporateTaxPage、SmallVatPage、ProfitMarginPage、GeneralVatPage、SurtaxPage、BreakEvenPage、LoanCalcPage、TaxpayerTypePage、InvoiceVerifyPage、ReportPage 等
  - 提升了界面的一致性和用户体验

- **CorporateTaxPage 布局优化**：修复了内容区域的 margin 设置
  - 移除了所有内容区域的左右 margin，内容区域现在占满整个宽度
  - 只保留顶部和底部的 margin 用于间距
  - 修复了按钮样式，使用默认的白色背景
  - 提升了布局的一致性和视觉效果

### 新增 (New Features)
- **应用评分功能**：在 Profile 页面最后一个 section 中添加了应用评分入口
  - 添加了"应用评分"菜单项，使用星形图标
  - 点击后可以打开应用市场进行评分
  - 使用 bundle ID `com.douhua.flag` 打开应用市场详情页
  - 添加了完整的错误处理和用户提示
  - 提升了用户体验，方便用户对应用进行评分和反馈

### 优化 (Optimizations)
- **知识库详情页收藏功能优化**：收藏图标会根据收藏状态显示不同颜色
  - 已收藏时，收藏图标显示为蓝色（#1677FF）
  - 未收藏时，收藏图标显示为灰色（#666666）
  - 点击收藏图标时会切换收藏状态，图标颜色会自动更新
  - 提升了用户体验，用户可以直观地看到当前的收藏状态

### 修复 (Bug Fixes)
- **分享应用功能修复**：修复了分享应用功能，使用标准的 ShareKit API 实现分享
  - 参考 `KnowledgeDetailPage.ets` 的实现，使用 `systemShare` 模块的 `SharedData` 和 `ShareController`
  - 使用系统分享面板分享应用信息，支持多种分享方式
  - 替换了之前使用 Want 方式的非标准实现，提升了分享功能的稳定性和用户体验
  - 添加了完整的错误处理和提示信息

- **征期提示设置同步修复**：修复了禁用征期提示后首页 banner 不消失的问题
  - 修改了 `checkAndShowTaxDeadline()` 方法，当设置被禁用时会立即隐藏 banner
  - 在切换到首页标签时，会自动重新检查征期提示设置并更新 banner 状态
  - 确保用户在 Profile 页面禁用征期提示后，返回首页时 banner 会立即隐藏
  - 提升了设置与 UI 显示的同步性

- **开票信息功能修复**：修复了开票信息保存和显示的多个问题
  - 重写了发票信息存储机制，使用 preferences 持久化存储完整的开票信息数据
  - 修复了保存后首页对话框仍显示"未填写"的问题，现在会正确检测已保存的信息
  - 修复了进入填写页面时数据为空的问题，现在会加载已保存的开票信息
  - 修复了保存后直接退出页面的问题，现在保存后会留在页面允许继续编辑
  - 首页对话框现在会显示实际的开票信息内容，而不是占位符
  - 添加了首页刷新机制，切换回首页标签时会自动刷新开票信息状态
  - 提升了用户体验，开票信息的保存和查看功能现在完全正常工作

### 优化 (Optimizations)
- **Profile 页面菜单优化**：将菜单项分成两个section，提升界面组织结构
  - 第一个section包含：当前省市、我的收藏、数字分位、征期提示（前4项）
  - 第二个section包含：深色模式、分享应用、关于应用（后3项）
  - 每个section使用独立的白色背景卡片，中间有间距分隔
  - 在深色模式后添加了"分享应用"功能，使用系统分享面板分享应用信息
  - 提升了页面的视觉层次感和功能分类清晰度

### 修复 (Bug Fixes)
- **Profile 页面城市选择刷新问题修复**：修复了选择城市后 Profile 页面不更新的问题
  - 在 `Index.ets` 中添加了 `profileRefreshKey` 状态，用于触发 Profile 页面数据刷新
  - 每次切换到 Profile 标签页时，自动递增 `profileRefreshKey` 以触发数据刷新
  - 修改了 `ProfilePage` 的刷新逻辑，使用 `refreshData()` 方法统一处理数据刷新
  - 确保用户在选择城市后，切换回 Profile 标签页时能看到最新的城市信息
- **Index 页面编译错误修复**：修复了 promptAction.showToast() 调用错误的问题
  - 移除了对返回 void 类型的方法调用 `.catch()` 的错误用法
  - `promptAction.showToast()` 返回 void 类型，不支持 Promise 的 `.catch()` 方法
  - 错误处理已由外层的 try-catch 块处理，无需额外的错误捕获

### 优化 (Optimizations)
- **轻松一刻按钮图标优化**：将轻松一刻区域的刷新按钮图标改为蓝色
  - 使用 `colorFilter('#1677FF')` 将图标颜色改为蓝色
  - 与整体UI风格保持一致，提升了视觉一致性
- **数字分位设置优化**：将"数字分位设置"改为"数字分位"，并调整对话框宽度
  - 菜单项和对话框标题从"数字分位设置"改为"数字分位"
  - 对话框宽度设置为80%，最大宽度320px
  - 与其他页面的对话框样式保持一致，提升了界面一致性

### 新增 (New Features)
- **小测验功能增强**：
  - 题目数量从87道增加到100道，新增13道关于现金流量表和财务分析的题目
  - 添加进度保存功能，使用preferences存储当前答题进度
  - 支持自动保存和恢复进度（当前题目索引、得分、已答题目的答案等）
  - 用户退出后重新进入可以继续之前的答题进度
  - 提升了用户体验，避免答题进度丢失
  - 补充了现金回收期相关题目，确保题目总数达到100道

### 修复 (Bug Fixes)
- **税务日历计算修复**：修复了申报截止日计算错误的问题
  - 修复前：无论当前日期，都计算次月15日
  - 修复后：如果当前日期在本月15日及之前，截止日为本月15日；如果已过本月15日，截止日为次月15日
  - 符合实际税务申报规则，提升了计算的准确性

### 优化 (Optimizations)
- **我的页面优化**：将 emoji 图标替换为 SVG 图标
  - 数字分位设置：使用 currency.svg 图标
  - 深色模式：使用 setting-config.svg 图标
  - 关于应用：使用 all-application.svg 图标
  - 所有图标均来自 IconPark 图标包，提升了界面的一致性和美观性
- **我的页面优化**：移除通知设置功能
  - 从我的页面中移除了通知设置菜单项和相关方法
  - 简化了页面结构，保留了数字分位设置、深色模式、关于应用等功能
- **我的页面优化**：取消设置页面，将设置功能整合到我的页面
  - 将数字分位设置、深色模式、关于应用等功能直接集成到我的页面
  - 用户无需跳转到单独的设置页面，所有设置功能在我的页面即可完成
  - 简化了导航结构，提升了用户体验
- **财务审核清单页面按钮优化**：将"清空所有"按钮宽度改为80%，最大宽度320px
  - 与其他页面的按钮样式保持一致
  - 提升了界面美观性和一致性
- **常用公式页面优化**：添加复制成功 Toast 提示
  - 复制公式到剪贴板后显示"已复制到剪贴板"提示
  - 复制失败时显示"复制失败"提示
  - 提升了用户体验，让用户明确知道复制操作的结果
- **税务违法举报页面优化**：更新举报链接为官方举报入口
  - 将举报链接更新为 https://fgk.chinatax.gov.cn/jzxx2023/wfjj2023.html
  - 使用国家税务总局官方违法举报入口，提升举报效率
- **人民币大小写转换页面优化**：添加复制成功 Toast 提示
  - 复制大写金额到剪贴板后显示"已复制到剪贴板"提示
  - 复制失败时显示"复制失败"提示
  - 提升了用户体验，让用户明确知道复制操作的结果
- **加班费计算页面说明优化**：更新计算公式说明文字，明确会根据用户输入的计薪天数计算
  - 将固定显示"21.75"改为"月计薪天数"，说明会根据用户输入值计算
  - 添加提示说明默认值为21.75天，可根据实际情况修改
  - 消除了用户对计算逻辑的误解
- **人民币大小写转换页面按钮优化**：将按钮宽度从100%改为80%，并添加最大宽度限制
  - 按钮宽度设置为80%，最大宽度320px，与其他页面保持一致
  - 提升了界面美观性和一致性
- **投资收益计算页面优化**：
  - 将按钮宽度从100%改为80%，并添加最大宽度限制，与其他页面保持一致
  - 将本金输入框改为使用 AmountInput 组件，支持快捷输入按钮（00, 000, 0000）
  - 提升了输入体验和界面一致性
- **复利计算器页面优化**：将本金输入框改为使用 AmountInput 组件
  - 本金输入框现在支持快捷输入按钮（00, 000, 0000）
  - 提升了输入体验和界面一致性
- **印花税页面按钮居中**：将计算按钮设置为居中显示
  - 添加了 `.alignSelf(ItemAlign.Center)` 使按钮在页面中居中
  - 提升了界面美观性和一致性
- **印花税页面计算结果margin优化**：为计算结果区域添加了底部margin
  - 结果区域现在有完整的margin设置（top, left, right, bottom）
  - 提升了页面布局的完整性和视觉间距
- **贷款计算器页面优化**：将贷款金额输入框改为使用 AmountInput 组件
  - 贷款金额输入框现在支持快捷输入按钮（00, 000, 0000）
  - 提升了输入体验和界面一致性
- **加班费计算页面布局优化**：将加班小时数和月计薪天数放在同一行显示
  - 小时数在前，月计薪天数在后
  - 两个输入框并排显示，各占48%宽度，中间留间距
  - 移除了顶部区域的 margin，使页面更紧凑
  - 优化了页面布局，节省垂直空间

### 修复 (Bug Fixes)
- **税款滞纳金页面优化**：移除了重复的"固定滞纳金率：0.05%（每日）"提示文本
  - 该信息已在底部说明部分显示，避免重复显示
- **印花税计算页面布局修复**：参考 BonusTaxPage.ets 统一了页面布局结构
  - 统一了各功能块的 padding 和 margin 样式
  - 优化了结果展示区域的布局，使用 Row + Blank() 格式
  - 添加了"计算结果"标题，使用 Divider 分隔各项结果
  - 统一了错误提示的显示位置和样式
- **企业所得税页面布局修复**：统一了页面布局格式和缩进
  - 修复了缩进不一致的问题
  - 统一了各功能块的布局格式
  - 优化了说明区域的文本对齐方式

### 优化 (Optimizations)
- **所有工具页面优化**：点击"计算"按钮时自动关闭键盘
  - 在所有工具页面的计算按钮中添加了关闭键盘功能
  - 使用 `inputMethod.getController().stopInputSession()` 关闭键盘
  - 提升了用户体验，点击计算后键盘自动收起
- **印花税计算页面样式优化**：删除了内容区域的左右 margin
  - 移除了合同类型、输入区域、按钮和结果展示区域的左右 margin
  - 内容区域现在紧贴屏幕边缘，只保留顶部间距
  - 使页面布局更加紧凑统一
- **盈亏平衡点页面优化**：将"件"从结果数值移到标签上
  - 标签从"保本销量"改为"保本销量（件）"
  - 数值只显示数字，不再单独显示"件"字
  - 使界面更加简洁统一
- **工具页面分类调整**：将"印花税计算"从"财务与经营计算"移动到"税务计算器"分类
  - 更符合税务工具的分类逻辑，提升用户体验
- **企业所得税页面优化**：将年度收入和年度成本费用输入框改为使用 AmountInput 组件
  - 年度收入和年度成本费用输入框现在支持快捷输入按钮（00, 000, 0000）
  - 提升了输入体验和界面一致性
- **附加税计算页面优化**：将增值税税额输入框改为使用 AmountInput 组件
  - 增值税税额输入框现在支持快捷输入按钮（00, 000, 0000）
  - 提升了输入体验和界面一致性
- **一般纳税人增值税页面优化**：将含税销售额和含税采购额输入框改为使用 AmountInput 组件
  - 含税销售额和含税采购额输入框现在支持快捷输入按钮（00, 000, 0000）
  - 提升了输入体验和界面一致性
- **小规模纳税人增值税页面优化**：将含税销售额输入框改为使用 AmountInput 组件
  - 含税销售额输入框现在支持快捷输入按钮（00, 000, 0000）
  - 提升了输入体验和界面一致性
- **复利计算器按钮宽度优化**：将计算按钮宽度改为与年终奖页面一致
  - 按钮宽度从100%改为80%，并设置最大宽度320
  - 统一了按钮样式，提升了界面一致性
- **印花税计算页面样式优化**：删除了内容区域的 margin 和 padding
  - 移除了合同类型、合同金额输入和结果展示区域的 margin 和 padding
  - 简化了页面布局，使内容更紧凑
- **离职补偿金页面优化**：将月平均工资输入框改为使用 AmountInput 组件，剩余月数默认值设为0
  - 月平均工资输入框现在支持快捷输入按钮（00, 000, 0000）
  - 剩余月数字段默认填入0，提升用户体验
  - 提升了输入体验和界面一致性
- **折旧摊销页面优化**：将资产原值输入框改为使用 AmountInput 组件
  - 资产原值输入框现在支持快捷输入按钮（00, 000, 0000）
  - 提升了输入体验和界面一致性
- **常用公式页面优化**：添加了复制功能并移除了右上角的分类标签
  - 在每个公式项的右上角添加了复制图标按钮
  - 点击复制按钮可复制公式示例到剪贴板
  - 移除了右上角的分类chip显示
- **小测验题目扩展**：将小测验题目从5道扩展到100道
  - 新增了95道会计、财务、税务相关的题目
  - 涵盖会计基础、财务会计、财务分析、税务等多个方面
  - 丰富了测验内容，提升学习效果
- **发票真伪查询页面优化**：将复制提示改为Toast显示
  - 复制网址成功或失败时使用Toast提示，不再使用页面内banner
  - 提升用户体验，Toast提示更加简洁直观
- **报销流程页面优化**：调整右侧人员chip的颜色样式
  - 右侧人员chip的背景色改为与左侧数字背景一致（使用step.color）
  - 文字颜色改为白色，与左侧数字文字颜色保持一致
  - 统一了视觉风格，提升了页面一致性
- **报销流程页面样式调整**：将右侧人员chip的背景色调浅并垂直居中对齐
  - 使用20%透明度的背景色，使背景更浅更柔和
  - 文字颜色改为与step.color一致，在浅色背景上更清晰可读
  - 调整布局使右侧chip与左侧数字垂直居中对齐，提升视觉一致性
- **财务审核清单页面优化**：将全选/取消全选按钮改为纯文本样式
  - 移除了按钮边框，改为纯文本显示
  - 简化了界面，提升了视觉一致性
- **财务审核清单页面按钮优化**：移除"已完成检查"按钮，优化"清空所有"按钮
  - 移除了"已完成检查"按钮，简化操作
  - "清空所有"按钮改为标准按钮样式，使用蓝色背景
  - 当没有任何选中项时，按钮自动禁用并显示灰色样式
  - 提升了用户体验和界面简洁性
- **会计分录模板页面优化**：移除选中section的边框
  - 移除了选中模板时的边框显示
  - 简化了界面，提升了视觉一致性
- **纳税人身份判断页面优化**：使用AmountInput组件替换普通输入框
  - 使用统一的AmountInput组件，提供快捷输入按钮（00, 000, 0000）
  - 提升了输入体验和界面一致性
- **盈亏平衡点页面优化**：使用AmountInput组件替换普通输入框
  - 三个输入字段（固定成本、单位售价、单位变动成本）均使用AmountInput组件
  - 提供快捷输入按钮（00, 000, 0000），提升输入效率
  - 统一了输入体验，提升了界面一致性
- **税务违法举报页面优化**：改进URL打开方式，参考发票查验页面实现
  - 优先使用通用Intent打开URL，失败时回退到华为浏览器
  - 添加错误提示，当无法打开浏览器时显示提示信息
  - 提升了用户体验和兼容性
- **计算器页面键盘布局调整**：重新调整了计算器键盘布局
  - 第一行：C、删除
  - 第二行：7、8、9、/
  - 第三行：4、5、6、×
  - 第四行：1、2、3、-
  - 第五行：.、0、=、+
  - 0按钮恢复为正常大小（不再是双倍宽度）
- **工具页面简化**：移除了工具页面的搜索功能
  - 移除了搜索框UI
  - 移除了搜索相关的状态和函数
  - 简化了页面结构，直接显示所有工具分类

### 修复 (Bug Fixes)
- **税款滞纳金页面优化**：将滞纳金率改为固定值，不可修改
  - 移除了滞纳金率的输入框，改为只读显示固定值 0.05%
  - 滞纳金率固定为每日 0.05%（万分之五），符合税法规定
  - 简化了用户操作，避免输入错误
- **输入类型修复**：修复了贷款计算器和加班费计算页面使用不存在的 InputType.Decimal 导致的编译错误
  - 将小数输入框的输入类型从 InputType.Decimal 改为 InputType.Normal
  - InputType.Normal 支持输入小数，解决了编译错误
- **贷款计算器小数输入修复**：修复了贷款计算器无法输入小数的问题
  - 将贷款金额和年利率输入框的输入类型改为 `InputType.Decimal`，支持小数输入
  - 贷款期限保持为 `InputType.Number`，仅允许输入整数
  - 修改了 `InputField` 方法，添加了 `inputType` 参数以支持不同的输入类型
- **Profile 城市选择功能修复**：修复了城市选择不落地的问题，现在选择城市后会持久化保存，并在 Profile 页面正确显示
  - 修复了 `CitySelectPage` 选择城市后未保存的问题
  - 修复了 `ProfilePage` 城市显示写死为"北京"的问题
  - 实现了城市选择的持久化存储

### 新增功能 (Features)
- **完整的省市列表**：新增了完整的中国省市数据（不包括港澳台地区）
  - 创建了 `provincesData.ets` 工具类，包含所有省市的完整数据
  - 实现了省市两级选择界面
  - 支持从省份选择进入城市列表

- **收藏功能完善**：实现了完整的收藏列表管理功能
  - 创建了 `favoritesManager.ets` 收藏管理工具类
  - 实现了收藏的添加、删除、查询功能
  - 收藏列表支持点击跳转到对应工具页面
  - 收藏数据持久化存储

### 优化 (Optimizations)
- **设置页面功能完善**：为设置页面的其他项添加了处理逻辑
  - 通知设置：添加了点击反馈（提示功能开发中）
  - 深色模式：添加了点击反馈（提示功能开发中）
  - 关于应用：添加了对话框显示应用信息

### 技术改进 (Technical Improvements)
- 使用 `preferences` API 实现数据持久化
- 优化了页面间的数据传递机制
- 改进了代码结构和可维护性

