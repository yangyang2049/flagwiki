# FlagWiki 手表版本规划文档

## 项目概述

基于现有的FlagWiki应用，为HarmonyOS手表设备开发精简版本。参考morse项目的手表实现模式，专注于核心学习和练习功能。

## 核心需求

### ✅ 包含功能
- **显示名称选择旗帜**：给定国家名称，选择正确的国旗
- **显示旗帜选择名称**：给定国旗图片，选择正确的国家名称

### ❌ 排除功能
- 所有画画游戏功能 (`paintgame/`)
- 所有传统游戏功能 (`inputgame/`, `memory/`, `quiz/`, `trivia/`, `fakeflag/`, `connections/`, `explore/`)

## 技术架构

### 参考项目分析

基于morse项目的成功手表实现：

#### UI设计模式
- **ArcSwiper导航**：使用圆弧式滑动手势切换页面
- **黑色主题**：`#000000` 背景，`#FFFFFF` 白色文字
- **圆点指示器**：`ArcDotIndicator` 显示当前页面位置
- **简化布局**：适配小屏幕，移除复杂装饰元素

#### 页面结构
```
watch/
├── Index.ets          # 主入口，使用ArcSwiper
├── LearnPage.ets      # 学习页面
├── PracticePage.ets   # 练习页面
├── SettingsPage.ets   # 设置页面
├── PracticeDetailPage.ets  # 练习详情页
└── ...
```

#### 数据管理
- 使用 `preferences` 存储学习进度和设置
- 轻量化数据加载，避免大文件
- 本地化字符串支持

## 功能规划

### 1. 主页面 (Index.ets)
```typescript
@Entry
@Component
struct Index {
  @State currentTab: number = 0 // 0: 学习, 1: 练习, 2: 设置

  build() {
    ArcSwiper(this.arcSwiperController) {
      LearnPage()     // 学习
      PracticePage()  // 练习
      SettingsPage()  // 设置
    }
    .indicator(new ArcDotIndicator())
    .backgroundColor('#000000')
  }
}
```

### 2. 学习页面 (LearnPage.ets)

#### 功能设计
- **洲别学习**：按大洲分组学习国旗
- **进度跟踪**：显示各洲学习进度
- **知识点**：显示国旗的基本信息（名称、首都、地区）

#### UI布局
- 标题栏：白色文字，居中显示
- 洲别列表：圆角按钮，显示进度条
- 点击进入：洲别详情学习页面

#### 数据结构
```typescript
interface ContinentProgress {
  continent: Continent;
  learned: number;
  total: number;
  progress: number; // 0-1
}
```

### 3. 练习页面 (PracticePage.ets)

#### 核心功能
- **名称→旗帜**：显示国家名称，选择正确国旗
- **旗帜→名称**：显示国旗图片，选择正确国家名称

#### 练习模式
```typescript
type PracticeMode = 'name_to_flag' | 'flag_to_name'
```

#### UI设计
- 模式选择：两个圆角按钮
- 练习统计：显示正确率、练习次数
- 难度设置：简单/中等/困难（根据国家知名度）

### 4. 练习详情页面 (PracticeDetailPage.ets)

#### 名称→旗帜模式
1. 显示国家中文名称
2. 显示4个国旗选项（1个正确，3个错误）
3. 用户选择后立即反馈
4. 自动进入下一题

#### 旗帜→名称模式
1. 显示国旗图片
2. 显示4个国家名称选项（1个正确，3个错误）
3. 用户选择后立即反馈
4. 自动进入下一题

#### 交互设计
- **点击选择**：直接点击选项
- **视觉反馈**：正确显示绿色✓，错误显示红色✗
- **自动前进**：1秒后自动进入下一题
- **进度显示**：右上角显示当前题号

### 5. 设置页面 (SettingsPage.ets)

#### 设置选项
- **练习难度**：简单/中等/困难
- **题目数量**：10/20/50题
- **自动播放**：开启/关闭
- **语言设置**：中文/英文
- **振动反馈**：开启/关闭

## 资源规划

### 数据资源
- **国家数据**：精简版，只包含主要国家（减少加载时间）
- **旗帜图片**：使用现有SVG资源，压缩尺寸适配手表
- **本地化**：复用现有中文字符串资源

### 文件结构
```
entry/src/main/
├── ets/
│   ├── pages/
│   │   └── watch/          # 新增手表页面目录
│   ├── utils/              # 复用现有工具类
│   └── data/               # 复用国家数据
├── resources/
│   ├── wearable/           # 新增手表资源目录
│   │   ├── element/
│   │   │   ├── color.json
│   │   │   └── string.json
│   │   └── profile/
│   │       └── main_pages.json
│   └── rawfile/
│       └── flags/          # 复用旗帜资源
```

## 实现步骤

### Phase 1: 基础架构搭建
1. 创建 `watch/` 目录结构
2. 配置 `wearable` 资源目录
3. 实现主页面 `Index.ets` 的ArcSwiper导航
4. 创建占位符页面（LearnPage, PracticePage, SettingsPage）

### Phase 2: 学习功能实现
1. 实现 `LearnPage.ets`，显示洲别列表
2. 创建洲别详情页面，显示该洲国家列表
3. 实现国家详情页，显示国旗和基本信息
4. 添加进度持久化存储

### Phase 3: 练习功能实现
1. 实现 `PracticePage.ets`，提供两种练习模式选择
2. 创建 `PracticeDetailPage.ets`，实现题目逻辑
3. 添加答案验证和反馈机制
4. 实现练习统计和历史记录

### Phase 4: 设置和优化
1. 实现 `SettingsPage.ets`，添加各项设置
2. 优化UI适配手表屏幕
3. 添加振动和声音反馈
4. 性能优化和内存管理

## 技术要点

### 手表UI适配
- **屏幕尺寸**：适配圆形/方形手表屏幕
- **触摸交互**：优化点击区域大小
- **文字大小**：确保可读性
- **颜色对比**：保证在不同亮度下的可读性

### 数据优化
- **延迟加载**：按需加载国家数据
- **图片压缩**：减小旗帜图片尺寸
- **缓存策略**：缓存用户进度和设置

### 性能考虑
- **内存使用**：避免同时加载过多图片
- **响应速度**：优化页面切换和数据加载
- **电池优化**：减少不必要的动画和计算

## 用户体验设计

### 学习流程
1. **洲别选择** → 2. **国家浏览** → 3. **详细信息** → 4. **标记完成**

### 练习流程
1. **模式选择** → 2. **难度设置** → 3. **开始练习** → 4. **即时反馈** → 5. **结果统计**

### 交互原则
- **简化操作**：最大化减少点击次数
- **即时反馈**：所有操作立即给出视觉/触觉反馈
- **进度可见**：始终显示当前学习/练习进度
- **错误友好**：练习模式下允许错误，给予提示

## 风险评估

### 技术风险
- **数据加载**：手表内存有限，大量旗帜数据可能导致性能问题
- **图片显示**：SVG在手表上的渲染效果需要测试
- **存储限制**：preferences存储空间有限

### 解决方案
- 实现数据分页加载
- 预处理图片资源，生成适合手表尺寸的版本
- 使用外部存储或云端同步用户数据

## 测试计划

### 功能测试
- 页面导航正常
- 学习进度正确保存
- 练习题目随机生成
- 答案验证准确

### 性能测试
- 页面切换流畅度
- 图片加载速度
- 内存使用情况
- 电池消耗测试

### 兼容性测试
- 不同手表型号适配
- 系统版本兼容性
- 不同分辨率适配

## 后续扩展

### 可能的增强功能
- **每日挑战**：每日固定题目
- **成就系统**：解锁成就徽章
- **排行榜**：与其他用户比较
- **离线模式**：无网络时仍可使用

### 数据分析
- 用户学习习惯分析
- 题目难度评估
- 功能使用统计

---

## 总结

手表版本的FlagWiki将专注于核心的学习和练习功能，通过简洁的UI设计和优化的交互体验，为用户提供在手表上学习国旗知识的良好体验。参考morse项目的成功实现，我们将采用相同的ArcSwiper导航模式和黑色主题设计，确保一致的用户体验。

关键成功因素：
1. **性能优化**：确保在手表有限资源下的流畅运行
2. **内容精简**：专注于核心功能，避免功能膨胀
3. **用户体验**：简洁直观的操作流程
4. **数据管理**：高效的进度保存和恢复机制