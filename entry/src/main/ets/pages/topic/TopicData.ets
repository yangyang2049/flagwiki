// ä¸“é¢˜æ•°æ®é…ç½®
import common from '@ohos.app.ability.common';
import { LocalizationUtil } from '../../utils/LocalizationUtil';

export interface TopicItem {
  id: string;
  name: string;
  description: string;
  emoji: string;
  countryCodes: string[];
}

// è·å–ä¸“é¢˜çš„æœ¬åœ°åŒ–åç§°
export function getTopicName(topicId: string, context: common.UIAbilityContext, language: string): string {
  const nameKeyMap: Record<string, Resource> = {
    'vexillology': $r('app.string.topic_vexillology'),
    'etiquette': $r('app.string.topic_etiquette'),
    'manufacturing': $r('app.string.topic_manufacturing'),
    'similar-flags': $r('app.string.topic_similar_flags'),
    'international': $r('app.string.topic_international'),
    'nordic': $r('app.string.topic_nordic'),
    'tricolor': $r('app.string.topic_tricolor'),
    'pan-arab': $r('app.string.topic_pan_arab'),
    'pan-african': $r('app.string.topic_pan_african'),
    'sun': $r('app.string.topic_sun'),
    'crescent-moon': $r('app.string.topic_crescent_moon'),
    'animals': $r('app.string.topic_animals'),
    'blue-ensign': $r('app.string.topic_blue_ensign'),
    'pan-slavic': $r('app.string.topic_pan_slavic'),
    'central-america': $r('app.string.topic_central_america'),
    'miranda': $r('app.string.topic_miranda')
  };
  
  const resource = nameKeyMap[topicId];
  if (resource) {
    try {
      return context.resourceManager.getStringSync(resource.id);
    } catch (e) {
      // å¦‚æœèµ„æºè·å–å¤±è´¥ï¼Œè¿”å›é»˜è®¤å€¼
      const topic = topics.find(t => t.id === topicId);
      return topic ? topic.name : topicId;
    }
  }
  
  // å¦‚æœæ‰¾ä¸åˆ°èµ„æºï¼Œè¿”å›é»˜è®¤å€¼
  const topic = topics.find(t => t.id === topicId);
  return topic ? topic.name : topicId;
}

// è·å–ä¸“é¢˜çš„æœ¬åœ°åŒ–æè¿°
export function getTopicDescription(topicId: string, context: common.UIAbilityContext, language: string): string {
  const descKeyMap: Record<string, Resource> = {
    'vexillology': $r('app.string.topic_vexillology_desc'),
    'etiquette': $r('app.string.topic_etiquette_desc'),
    'manufacturing': $r('app.string.topic_manufacturing_desc'),
    'similar-flags': $r('app.string.topic_similar_flags_desc'),
    'international': $r('app.string.topic_international_desc'),
    'nordic': $r('app.string.topic_nordic_desc'),
    'tricolor': $r('app.string.topic_tricolor_desc'),
    'pan-arab': $r('app.string.topic_pan_arab_desc'),
    'pan-african': $r('app.string.topic_pan_african_desc'),
    'sun': $r('app.string.topic_sun_desc'),
    'crescent-moon': $r('app.string.topic_crescent_moon_desc'),
    'animals': $r('app.string.topic_animals_desc'),
    'blue-ensign': $r('app.string.topic_blue_ensign_desc'),
    'pan-slavic': $r('app.string.topic_pan_slavic_desc'),
    'central-america': $r('app.string.topic_central_america_desc'),
    'miranda': $r('app.string.topic_miranda_desc')
  };
  
  const resource = descKeyMap[topicId];
  if (resource) {
    try {
      return context.resourceManager.getStringSync(resource.id);
    } catch (e) {
      // å¦‚æœèµ„æºè·å–å¤±è´¥ï¼Œè¿”å›é»˜è®¤å€¼
      const topic = topics.find(t => t.id === topicId);
      return topic ? topic.description : '';
    }
  }
  
  // å¦‚æœæ‰¾ä¸åˆ°èµ„æºï¼Œè¿”å›é»˜è®¤å€¼
  const topic = topics.find(t => t.id === topicId);
  return topic ? topic.description : '';
}

export const topics: TopicItem[] = [
  // æ–‡å­—ç±»ä¸“é¢˜ï¼ˆæ’åœ¨å‰é¢ï¼‰
  {
    id: 'vexillology',
    name: 'æ——å¸œå­¦',
    description: 'æ——å¸œå­¦ï¼ˆå›½æ——å­¦ï¼‰çš„åŸºç¡€çŸ¥è¯†ã€ç ”ç©¶æ–¹æ³•å’Œå†å²æ¼”å˜',
    emoji: 'ğŸ“š',
    countryCodes: [] // ç©ºæ•°ç»„è¡¨ç¤ºè¿™æ˜¯çŸ¥è¯†æ€§ä¸“é¢˜
  },
  {
    id: 'etiquette',
    name: 'å›½æ——ç¤¼ä»ª',
    description: 'å›½æ——åœ¨å›½é™…åœºåˆçš„ä½¿ç”¨è§„èŒƒå’Œç¤¼ä»ªçŸ¥è¯†',
    emoji: 'ğŸ–ï¸',
    countryCodes: [] // ç©ºæ•°ç»„è¡¨ç¤ºè¿™æ˜¯çŸ¥è¯†æ€§ä¸“é¢˜
  },
  {
    id: 'manufacturing',
    name: 'å›½æ——åˆ¶ä½œ',
    description: 'å›½æ——åˆ¶ä½œçš„æµç¨‹ã€ææ–™ã€å·¥å‚å’Œè´¨é‡æ ‡å‡†',
    emoji: 'ğŸ­',
    countryCodes: [] // ç©ºæ•°ç»„è¡¨ç¤ºè¿™æ˜¯çŸ¥è¯†æ€§ä¸“é¢˜
  },
  {
    id: 'similar-flags',
    name: 'ç›¸ä¼¼æ——',
    description: 'ä¸€äº›å›½å®¶çš„å›½æ——ç›¸ä¼¼åº¦è¾ƒé«˜ï¼Œä»…åœ¨æ¯”ä¾‹ã€é¢œè‰²æ·±åº¦æˆ–ç»†èŠ‚ä¸Šæœ‰æ‰€ä¸åŒ',
    emoji: 'ğŸ”€',
    countryCodes: ['mc', 'id', 'nl', 'lu', 'ro', 'td', 'cn', 'vn', 'ke', 'ss', 'ad', 'md', 'ir', 'tj', 'ie', 'ci'] // æ‘©çº³å“¥ã€å°å°¼ã€è·å…°ã€å¢æ£®å ¡ã€ç½—é©¬å°¼äºšã€ä¹å¾—ã€ä¸­å›½ã€è¶Šå—ã€è‚¯å°¼äºšã€å—è‹ä¸¹ã€å®‰é“å°”ã€æ‘©å°”å¤šç“¦ã€ä¼Šæœ—ã€å¡”å‰å…‹æ–¯å¦ã€çˆ±å°”å…°ã€ç§‘ç‰¹è¿ªç“¦
  },
  {
    id: 'international',
    name: 'å›½é™…ç»„ç»‡',
    description: 'ä¸»è¦å›½é™…ç»„ç»‡çš„æ——å¸œ',
    emoji: 'ğŸŒ',
    countryCodes: ['un', 'eu', 'olympic', 'nato', 'asean', 'au_org', 'arab_league', 'red_cross', 'fiav']
  },
  // å…¶ä»–ä¸“é¢˜
  {
    id: 'nordic',
    name: 'åŒ—æ¬§æ——å¸œ',
    description: 'ä»¥åŒ—æ¬§åå­—ä¸ºç‰¹å¾çš„æ–¯å ªçš„çº³ç»´äºšå›½å®¶æ——å¸œ',
    emoji: 'ğŸ‡©ğŸ‡°',
    countryCodes: ['dk', 'se', 'no', 'fi', 'is']
  },
  {
    id: 'tricolor',
    name: 'ä¸‰è‰²æ——',
    description: 'ç”±ä¸‰ç§é¢œè‰²æ¡çº¹ç»„æˆçš„ç»å…¸å›½æ——è®¾è®¡',
    emoji: 'ğŸ‡«ğŸ‡·',
    countryCodes: ['fr', 'it', 'de', 'be', 'nl', 'ie', 'ru', 'hu', 'ro', 'bg', 'lt', 'ee', 'lv', 'at', 'lu', 'mc', 'ml', 'td', 'ci', 'gn', 'ng', 'cm', 'sn', 'ne']
  },
  {
    id: 'pan-arab',
    name: 'æ³›é˜¿æ‹‰ä¼¯æ——å¸œ',
    description: 'é‡‡ç”¨çº¢ã€ç™½ã€é»‘ã€ç»¿æ³›é˜¿æ‹‰ä¼¯è‰²å½©çš„å›½æ——',
    emoji: 'ğŸ‡µğŸ‡¸',
    countryCodes: ['jo', 'ps', 'ae', 'kw', 'sd', 'sy', 'iq', 'ye', 'eg', 'ly']
  },
  {
    id: 'pan-african',
    name: 'æ³›éæ´²æ——å¸œ',
    description: 'é‡‡ç”¨çº¢ã€é»„ã€ç»¿æ³›éæ´²è‰²å½©çš„å›½æ——',
    emoji: 'ğŸŒ',
    countryCodes: ['et', 'gh', 'gn', 'ml', 'sn', 'bf', 'bj', 'tg', 'cm', 'cg', 'cf', 'rw', 'zm', 'zw', 'mz', 'ke', 'tz', 'ug']
  },
  {
    id: 'sun',
    name: 'å¤ªé˜³æ——',
    description: 'å›½æ——ä¸Šç»˜æœ‰å¤ªé˜³å›¾æ¡ˆçš„å›½å®¶',
    emoji: 'â˜€ï¸',
    countryCodes: ['jp', 'bd', 'pw', 'ki', 'kz', 'kg', 'mw', 'na', 'ar', 'ag']
  },
  {
    id: 'crescent-moon',
    name: 'æ˜Ÿæœˆæ——',
    description: 'å›½æ——ä¸Šç»˜æœ‰æ˜Ÿæœˆæ ‡å¿—çš„å›½å®¶',
    emoji: 'ğŸŒ™',
    countryCodes: ['tr', 'pk', 'my', 'sg', 'dz', 'tn', 'mr', 'az', 'km', 'mv', 'ly', 'uz']
  },
  {
    id: 'animals',
    name: 'å›½æ——ä¸Šçš„åŠ¨ç‰©',
    description: 'å›½æ——ä¸Šç»˜æœ‰åŠ¨ç‰©å›¾æ¡ˆçš„å›½å®¶',
    emoji: 'ğŸ¦',
    countryCodes: ['al', 'bt', 'lk', 'pg', 'zm', 'zw', 'ug', 'ec', 'es', 'kz', 'mx', 'rs', 'me', 'eg']
  },
  {
    id: 'blue-ensign',
    name: 'è“èˆ¹æ——',
    description: 'æ¥è‡ªè‹±å›½çš„æ°‘ç”¨èˆ¹æ——è“èˆ¹æ——ï¼Œç±³å­—æ——ä»£è¡¨å‰è‹±å›½æ®–æ°‘åœ°ï¼Œè±¡å¾ä¸ºè‹±è”é‚¦æˆå‘˜',
    emoji: 'ğŸš¢',
    countryCodes: ['au', 'nz', 'fj', 'tv'] // æ¾³å¤§åˆ©äºšã€æ–°è¥¿å…°ã€æ–æµã€å›¾ç“¦å¢
  },
  {
    id: 'pan-slavic',
    name: 'æ³›æ–¯æ‹‰å¤«æ——',
    description: 'é‡‡ç”¨çº¢ã€ç™½ã€è“æ³›æ–¯æ‹‰å¤«è‰²å½©çš„å›½æ——ï¼Œä»£è¡¨æ–¯æ‹‰å¤«æ°‘æ—çš„å›¢ç»“',
    emoji: 'ğŸ‡·ğŸ‡º',
    countryCodes: ['ru', 'rs', 'sk', 'si', 'hr', 'cz'] // ä¿„ç½—æ–¯ã€å¡å°”ç»´äºšã€æ–¯æ´›ä¼å…‹ã€æ–¯æ´›æ–‡å°¼äºšã€å…‹ç½—åœ°äºšã€æ·å…‹
  },
  {
    id: 'central-america',
    name: 'æ³›ä¸­ç¾æ´²è”é‚¦è‰²æ——',
    description: 'ä¸­ç¾æ´²è”é‚¦å›½æ——ï¼Œè“è‰²ä»£è¡¨åŠ å‹’æ¯”æµ·å’Œå¤ªå¹³æ´‹ï¼Œç™½è‰²ä»£è¡¨å’Œå¹³ï¼Œå¾ˆå¤šå‰ä¸­ç¾æ´²è”é‚¦å…±å’Œå›½çš„æˆå‘˜å›½é‡‡ç”¨',
    emoji: 'ğŸ‡¬ğŸ‡¹',
    countryCodes: ['sv', 'hn', 'ni'] // è¨å°”ç“¦å¤šã€æ´ªéƒ½æ‹‰æ–¯ã€å°¼åŠ æ‹‰ç“œ
  },
  {
    id: 'miranda',
    name: 'æ³›ç±³å…°è¾¾è‰²æ——',
    description: 'è¯¥æ——ä¸ºå¼—æœ—è¥¿æ–¯ç§‘Â·å¾·Â·ç±³å…°è¾¾äºå—ç¾ç‹¬ç«‹è¿åŠ¨æ‰€ç”¨çš„æ——å¸œï¼Œå…¶ä¸­çº¢è‰²æ˜¯å—ç¾æ´²ï¼Œé»„è‰²æ˜¯è¥¿ç­ç‰™ï¼Œè“è‰²æ˜¯æµ·ã€‚åä¸ºå‰å¤§å“¥ä¼¦æ¯”äºšå…±å’Œå›½çš„ä¼šå‘˜å›½é‡‡ç”¨',
    emoji: 'ğŸ‡¨ğŸ‡´',
    countryCodes: ['co', 've', 'ec'] // å“¥ä¼¦æ¯”äºšã€å§”å†…ç‘æ‹‰ã€å„ç“œå¤šå°”
  }
];

export function getTopicById(id: string): TopicItem | undefined {
  return topics.find(t => t.id === id);
}

export function getAllTopics(): TopicItem[] {
  return topics;
}

